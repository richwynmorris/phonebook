(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var c=n(17),a=n.n(c),r=n(8),o=n(18),u=n(3),i=n(2),s=n(5),b=n.n(s),d="/api/persons",l={getAll:function(){return b.a.get("".concat(d)).then((function(e){return e.data}))},createContact:function(e){return b.a.post("".concat(d),e).then((function(e){return e.data}))},deleteContact:function(e){return b.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},updateContact:function(e,t){return b.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},j=n(0),h=function(e){var t,n,c=e.successMessage,a=e.errorMessage;if(null===c&&null===a)return null;c?(t="green",n=c):(t="red",n=a);var r={color:"".concat(t),fontStyle:"bold",background:"lightgrey",fontSize:"20",borderStyle:"solid",borderRadius:"5",padding:"10",marginBottom:"10"};return Object(j.jsx)("div",{style:r,children:n})},f=function(e){var t=e.value,n=e.onChange;return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"filter shown with"}),Object(j.jsx)("input",{value:t,onChange:n})]})},O=function(e){var t=e.name,n=e.number,c=e.formSub,a=e.nameChange,r=e.numberChange;return Object(j.jsxs)("form",{onSubmit:c,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:t,onChange:a})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:n,onChange:r})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.contacts,n=e.deleteContact;return t.map((function(e){return Object(j.jsxs)("div",{"data-name":e.name,id:e.id,children:[Object(j.jsxs)("p",{children:[e.name,": ",e.number]}),Object(j.jsx)("button",{onClick:n,children:"Delete"})]},e.name)}))},g=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),s=Object(u.a)(a,2),b=s[0],d=s[1],g=Object(i.useState)(""),v=Object(u.a)(g,2),p=v[0],x=v[1],C=Object(i.useState)(""),w=Object(u.a)(C,2),S=w[0],k=w[1],y=Object(i.useState)(""),A=Object(u.a)(y,2),L=A[0],M=A[1],E=Object(i.useState)(null),B=Object(u.a)(E,2),D=B[0],J=B[1],T=Object(i.useState)(null),z=Object(u.a)(T,2),I=z[0],N=z[1];Object(i.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);var P=L||n;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["debug: ",b]}),Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(h,{successMessage:D,errorMessage:I}),Object(j.jsx)(f,{value:S,onChange:function(e){S=e.target.value;var t=Object(o.a)(n).filter((function(e){return e.name.slice(0,S.length).toLowerCase()===S.toLowerCase()}));M(t),k(S)}}),Object(j.jsx)("h3",{children:"Add Contact"}),Object(j.jsx)(O,{value:b,formSub:function(e){if((e.preventDefault(),n.some((function(e){return e.name.toLowerCase()===b.toLowerCase()})))&&window.confirm("".concat(b," already exists in the phonebook, replace the old number with the new one?")))return void function(e){var t=n.find((function(e){return e.name.toLowerCase()===b.toLowerCase()})),a=t.id,o=Object(r.a)(Object(r.a)({},t),{},{number:p});l.updateContact(a,o).then((function(t){console.log(t),d(b=""),x(p=""),e.target.reset(),c(n.map((function(e){return e.id!==a?e:t})))}))}(e);var t={name:b,number:p};l.createContact(t).then((function(t){c(n.concat(t)),J("".concat(b," was added to the phonebook")),d(""),x(""),e.target.reset(),setTimeout((function(){J(null)}),5e3)})).catch((function(e){N(e.response.data.error),setTimeout((function(){N(null)}),5e3)}))},nameChange:function(e){var t=e.target.value;d(b=t)},numberChange:function(e){var t=e.target.value;x(p=t)}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(m,{contacts:P,deleteContact:function(e){var t=e.target.parentElement,a=t.getAttribute("data-name"),r=t.getAttribute("id");window.confirm("Are you sure you want to delete ".concat(a,"?"))&&l.deleteContact(r).then((function(e){var t=n.filter((function(e){return e.id!==r}));c(t)}))}})]})};a.a.render(Object(j.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.986c11fa.chunk.js.map